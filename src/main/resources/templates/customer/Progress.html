<!DOCTYPE html>
<html lang="zxx">

<head>
    <meta charset="UTF-8">
    <meta name="description" content="Gym Template">
    <meta name="keywords" content="Gym, unica, creative, html">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Gym | Template</title>

    <!-- Google Font -->
    <link href="https://fonts.googleapis.com/css?family=Muli:300,400,500,600,700,800,900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Oswald:300,400,500,600,700&display=swap" rel="stylesheet">

<!-- Css Styles -->
<link rel="stylesheet" th:href="@{/css2/bootstrap.min.css}" type="text/css">
<link rel="stylesheet" th:href="@{/css2/font-awesome.min.css}" type="text/css">
<link rel="stylesheet" th:href="@{/css2/flaticon.css}" type="text/css">
<link rel="stylesheet" th:href="@{/css2/owl.carousel.min.css}" type="text/css">
<link rel="stylesheet" th:href="@{/css2/barfiller.css}" type="text/css">
<link rel="stylesheet" th:href="@{/css2/magnific-popup.css}" type="text/css">
<link rel="stylesheet" th:href="@{/css2/slicknav.min.css}" type="text/css">
<link rel="stylesheet" th:href="@{/css2/style.css}" type="text/css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns"></script>
    <style>
        .content {
            background-color: #151515;
            color: #fff;
            padding: 20px;
            border-radius: 5px;
        }

        .container {
            background-color: #333;
            color: #fff;
            padding: 20px;
            border-radius: 5px;
            margin: 20px auto;
            max-width: 1200px;
        }

        .container button {
            background-color: #f36100;
            color: #fff;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }

        .container button:hover {
            background-color: #e05500;
        }

        .user-info {
            display: flex;
            justify-content: space-around;
            margin-bottom: 20px;
        }

        .user-info div {
            background-color: #444;
            color: #fff;
            padding: 10px;
            border-radius: 5px;
            flex: 1;
            margin: 0 10px;
            text-align: center;
            border-color: #f36100;
        }

    </style>
    <style>
        .user-icon {
            font-size: 2rem;
            color: white; /* Màu trắng cho icon */
            text-decoration: none;
            margin-right: 10px; /* Khoảng cách giữa icon và login/signup */
        }

        .user-icon:hover {
            color: #007bff; /* Màu khi hover */
        }

        /* Căn chỉnh các liên kết login/signup */
        .auth-links a {
            text-decoration: none;
            color: white; /* Màu trắng */
            font-weight: bold;
            margin-left: 0px;
        }

        .auth-links a:hover {
            color: #007bff; /* Màu khi hover */
        }

        /* Thêm hiệu ứng cho các liên kết */
        .login-btn, .signup-btn {
            text-transform: uppercase; /* Viết hoa cho các liên kết */
        }
    </style>
</head>

<body>
<!-- Page Preloder -->
<div id="preloder">
    <div class="loader"></div>
</div>

<!-- Offcanvas Menu Section Begin -->
<div class="offcanvas-menu-overlay"></div>
<div class="offcanvas-menu-wrapper">
    <div class="canvas-close">
        <i class="fa fa-close"></i>
    </div>
    <div class="canvas-search search-switch">
        <i class="fa fa-search"></i>
    </div>
    <nav class="canvas-menu mobile-menu">
        <ul>
            <li><a href="/customer/home">Home</a></li>
            <li><a href="/customer/home/nutrition-plan">Kế hoạch dinh dưỡng</a></li>
            <li><a href="/customer/home/workout-plan">Kế hoạch luyện tập</a></li>
            <li><a href="/customer/home/Progress">Tiến độ luyện tập</a></li>
            <li><a href="/customer/home/shop">Shop</a></li>
            <li><a href="/customer/home/users/notification">Thông báo</a></li>
            <li><a href="/customer/home/chat">Chăm sóc khách hàng</a></li>
        </ul>
    </nav>
    <div id="mobile-menu-wrap"></div>
    <div class="canvas-social">
        <a href="#"><i class="fa fa-facebook"></i></a>
        <a href="#"><i class="fa fa-twitter"></i></a>
        <a href="#"><i class="fa fa-youtube-play"></i></a>
        <a href="#"><i class="fa fa-instagram"></i></a>
    </div>
</div>
<!-- Offcanvas Menu Section End -->

<!-- Header Section Begin -->
<header class="header-section">
    <div class="container-fluid">
        <div class="row">
            <div class="col-lg-3">
                <div class="logo">
                    <a href="/customer/home">
                        <img th:src="@{/img/logo.png}" alt="">
                    </a>
                </div>
            </div>
            <div class="col-lg-6">
                <nav class="nav-menu">
                    <ul>
                        <li><a href="/customer/home">Home</a></li>
                        <li><a href="/customer/home/nutrition-plan">Kế hoạch dinh dưỡng</a></li>
                        <li><a href="/customer/home/workout-plan">Kế hoạch luyện tập</a></li>
                        <li class="active"><a href="/customer/home/Progress">Tiến độ luyện tập</a></li>
                        <li><a href="/customer/home/shop">Shop</a></li>
                        <li><a href="/customer/home/users/notification">Thông báo</a></li>
                        <li><a href="/customer/home/chat">Chăm sóc khách hàng</a></li>
                    </ul>
                </nav>
            </div>
            <div class="col-lg-3">
                <!-- User Icon and Login/Signup Links -->
                <div class="d-flex justify-content-end align-items-center">
                    <a href="/customer/home/users" class="user-icon" id="user-icon">
                        <i class="fa fa-user"></i>
                    </a>
                    <div class="auth-links ml-3" id="auth-links">
                        <a href="/req/login" class="login-btn" id="login-btn">Login</a> |
                        <a href="/req/signup" class="signup-btn">Signup</a>
                    </div>
                    <div class="user-info text-white" id="user-info" style="display: none;">
                        <span>Welcome, <span id="username"></span>!</span>
                    </div>
                </div>
            </div>
        </div>
        <div class="canvas-open">
            <i class="fa fa-bars"></i>
        </div>
    </div>
</header>
<!-- Header End -->

<section class="breadcrumb-section set-bg" th:data-setbg="@{/img/breadcrumb-bg.jpg}">
    <div class="container">
        <div class="row">
            <div class="col-lg-12 text-center">
                <div class="breadcrumb-text">
                    <h2>Tiến độ luyện tập</h2>
                    <div class="bt-option">
                        <a href="/customer/home">Home</a>
                        <span>Tiến độ luyện tập</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- Breadcrumb Section End -->
<!-- content -->
<section class="content">
    <div class="container">
        <div class="user-info">
            <div>
                <p id="userHeight">Height: </p>
            </div>
            <div>
                <p id="userWeight">Weight: </p>
            </div>
            <div>
                <p id="dayStreak">Day Streak: </p>
            </div>
        </div>
        <canvas id="progressChart" width="400" height="200">
            Your browser does not support the canvas element.
        </canvas>
    </div>

</section>
<!-- Footer Section Begin -->
<section class="footer-section">
    <div class="container">
        <div class="row">
            <div class="col-lg-4">
                <div class="fs-about">
                    <div class="fa-logo">
                        <a href="#"><img th:src="@{/img/logo.png}" alt=""></a>
                    </div>
                    <p>“Con đường dẫn đến thành công được làm nên từ những viên gạch của sự kiên trì. Hãy là chính mình, vượt qua mọi chướng ngại và theo đuổi ước mơ của bản thân.”</p>
                    <div class="fa-social">
                        <a href="#"><i class="fa fa-facebook"></i></a>
                        <a href="#"><i class="fa fa-twitter"></i></a>
                        <a href="#"><i class="fa fa-youtube-play"></i></a>
                        <a href="#"><i class="fa fa-instagram"></i></a>
                        <a href="#"><i class="fa  fa-envelope-o"></i></a>
                    </div>
                </div>
            </div>
            <div class="col-lg-2 col-md-3 col-sm-6">
                <div class="fs-widget">
                    <h4>Useful links</h4>
                    <ul>
                        <li><a href="#">About</a></li>
                        <li><a href="#">Blog</a></li>
                        <li><a href="#">Classes</a></li>
                        <li><a href="#">Contact</a></li>
                    </ul>
                </div>
            </div>
            <div class="col-lg-2 col-md-3 col-sm-6">
                <div class="fs-widget">
                    <h4>Support</h4>
                    <ul>
                        <li><a href="/req/login">Login</a></li>
                        <li><a href="#">My account</a></li>
                        <li><a href="#">Subscribe</a></li>
                        <li><a href="#">Contact</a></li>
                    </ul>
                </div>
            </div>
            <div class="col-lg-4 col-md-6">
                <div class="fs-widget">
                    <h4>Tips & Guides</h4>
                    <div class="fw-recent">
                        <h6><a href="#">Physical fitness may help prevent depression, anxiety</a></h6>
                        <ul>
                            <li>3 min read</li>
                            <li>20 Comment</li>
                        </ul>
                    </div>
                    <div class="fw-recent">
                        <h6><a href="#">Fitness: The best exercise to lose belly fat and tone up...</a></h6>
                        <ul>
                            <li>3 min read</li>
                            <li>20 Comment</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-12 text-center">
                <div class="copyright-text">
                    <p><!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
                        Copyright &copy;
                        <script>document.write(new Date().getFullYear());</script> All rights reserved | This
                        template is made with <i class="fa fa-heart" aria-hidden="true"></i> by <a
                                href="https://colorlib.com" target="_blank">Colorlib</a>
                        <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
                    </p>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- Footer Section End -->

<!-- Search model Begin -->
<div class="search-model">
    <div class="h-100 d-flex align-items-center justify-content-center">
        <div class="search-close-switch">+</div>
        <form class="search-model-form">
            <input type="text" id="search-input" placeholder="Search here.....">
        </form>
    </div>
</div>
<!-- Search model end -->

<script>
    document.addEventListener('DOMContentLoaded', async () => {
        const progressChartElement = document.getElementById('progressChart');
        if (!progressChartElement) {
            console.error('progressChart element not found');
            return;
        }

        if (!progressChartElement.getContext) {
            console.error('progressChart element does not support getContext');
            return;
        }
        const progressChart = progressChartElement.getContext('2d');

        // Fetch user profile data
        async function fetchUserProfile() {
            try {
                const response = await fetch('/customer/home/users/user-info');
                const userData = await response.json();
                console.log('User Data:', userData);
                return { height: userData.height, weight: userData.weight, userID: userData.userID };
            } catch (error) {
                console.error('Error fetching user profile data:', error);
                return { height: 0, weight: 0 };
            }
        }

        // Fetch progress data
        async function fetchProgressData(userID) {
            try {
                const response = await fetch(`/customer/home/users/progress/${userID}`);
                const progressData = await response.json();
                console.log('Progress Data:', progressData);
                return progressData;
            } catch (error) {
                console.error('Error fetching progress data:', error);
                return [];
            }
        }

        // Example usage
        const profile = await fetchUserProfile();
        console.log('Profile:', profile);

        const progressData = await fetchProgressData(profile.userID);
        console.log('Progress Data:', progressData);

        // Update user info
        document.getElementById('userHeight').textContent = `Height: ${profile.height} cm`;
        document.getElementById('userWeight').textContent = `Weight: ${profile.weight} kg`;

        // Create the chart
        new Chart(progressChart, {
            type: 'bar',
            data: {
                labels: progressData.map(progress => progress.planName),
                datasets: [{
                    label: 'Achievement Status',
                    data: progressData.map(progress =>
                        progress.achievement === "COMPLETED" ? 2 :
                            progress.achievement === "IN_PROGRESS" ? 1 : 0),
                    backgroundColor: progressData.map(progress =>
                        progress.achievement === "COMPLETED" ? 'rgba(54, 162, 235, 0.7)' :
                            progress.achievement === "IN_PROGRESS" ? 'rgba(255, 206, 86, 0.7)' :
                                'rgba(255, 99, 132, 0.7)'
                    ),
                    borderColor: progressData.map(progress =>
                        progress.achievement === "COMPLETED" ? 'rgba(54, 162, 235, 1)' :
                            progress.achievement === "IN_PROGRESS" ? 'rgba(255, 206, 86, 1)' :
                                'rgba(255, 99, 132, 1)'
                    ),
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                const progress = progressData[context.dataIndex];
                                return `Plan: ${progress.planName}\nStatus: ${progress.achievement}`;
                            }
                        }
                    },
                    legend: {
                        labels: {
                            color: '#ffffff' // Bright text color
                        }
                    }
                },
                scales: {
                    x: {
                        title: {
                            display: true,
                            text: 'Workout Plans',
                            color: '#ffffff' // Bright text color
                        },
                        ticks: {
                            color: '#ffffff' // Bright text color
                        }
                    },
                    y: {
                        title: {
                            display: true,
                            text: 'Status',
                            color: '#ffffff' // Bright text color
                        },
                        ticks: {
                            stepSize: 1,
                            callback: value =>
                                value === 2 ? 'COMPLETED' :
                                    value === 1 ? 'IN_PROGRESS' : 'NOT_STARTED',
                            color: '#ffffff' // Bright text color
                        },
                        grid: {
                            color: 'rgba(255, 255, 255, 0.2)' // Subtle grid lines
                        }
                    }
                }
            }
        });
    });
</script>


<!-- Js Plugins -->
<script th:src="@{/js/api/user-api.js}"></script>
<script th:src="@{/js2/jquery-3.3.1.min.js}"></script>
<script th:src="@{/js2/bootstrap.min.js}"></script>
<script th:src="@{/js2/jquery.magnific-popup.min.js}"></script>
<script th:src="@{/js2/masonry.pkgd.min.js}"></script>
<script th:src="@{/js2/jquery.barfiller.js}"></script>
<script th:src="@{/js2/jquery.slicknav.js}"></script>
<script th:src="@{/js2/owl.carousel.min.js}"></script>
<script th:src="@{/js2/main.js}"></script>



</body>

</html>