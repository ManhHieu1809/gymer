<!DOCTYPE html>
<html lang="zxx">

<head>
    <meta charset="UTF-8">
    <meta name="description" content="Gym Template">
    <meta name="keywords" content="Gym, unica, creative, html">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Gym | Template</title>

    <!-- Google Font -->
    <link href="https://fonts.googleapis.com/css?family=Muli:300,400,500,600,700,800,900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Oswald:300,400,500,600,700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/sockjs-client/1.5.1/sockjs.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/stomp.js/2.3.3/stomp.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
<!-- Css Styles -->
<link th:href="@{/css2/bootstrap.min.css}" rel="stylesheet" type="text/css">
<link th:href="@{/css2/font-awesome.min.css}" rel="stylesheet" type="text/css">
<link th:href="@{/css2/flaticon.css}" rel="stylesheet" type="text/css">
<link th:href="@{/css2/owl.carousel.min.css}" rel="stylesheet" type="text/css">
<link th:href="@{/css2/barfiller.css}" rel="stylesheet" type="text/css">
<link th:href="@{/css2/magnific-popup.css}" rel="stylesheet" type="text/css">
<link th:href="@{/css2/slicknav.min.css}" rel="stylesheet" type="text/css">
<link th:href="@{/css2/style.css}" rel="stylesheet" type="text/css">

    <style>
        /* CƒÉn ch·ªânh ph·∫ßn User icon v√† Login/Signup trong header */

        /* CƒÉn ch·ªânh bi·ªÉu t∆∞·ª£ng ng∆∞·ªùi d√πng */
        .user-icon {
            font-size: 2rem;
            color: white; /* M√†u tr·∫Øng cho icon */
            text-decoration: none;
            margin-right: 10px; /* Kho·∫£ng c√°ch gi·ªØa icon v√† login/signup */
        }

        .user-icon:hover {
            color: #007bff; /* M√†u khi hover */
        }

        /* CƒÉn ch·ªânh c√°c li√™n k·∫øt login/signup */
        .auth-links a {
            text-decoration: none;
            color: white; /* M√†u tr·∫Øng */
            font-weight: bold;
            margin-left: 0px;
        }

        .auth-links a:hover {
            color: #007bff; /* M√†u khi hover */
        }

        /* Th√™m hi·ªáu ·ª©ng cho c√°c li√™n k·∫øt */
        .login-btn, .signup-btn {
            text-transform: uppercase; /* Vi·∫øt hoa cho c√°c li√™n k·∫øt */
        }
    </style>

    <style>
        body {
            background-color: #f4f6f9;
        }
        .container {
            margin-top: 20px;
        }
        .conversation-list {
            border-right: 1px solid #ddd;
            height: 500px;
            overflow-y: auto;
            background-color: #fff;
            padding: 0; /* X√≥a padding m·∫∑c ƒë·ªãnh */
        }
        .conversation-item {
            padding: 8px; /* Gi·∫£m padding */
            font-size: 12px; /* Gi·∫£m c·ª° ch·ªØ */
            border-bottom: 1px solid #ddd;
            cursor: pointer;
        }
        .conversation-item:hover {
            background-color: #f0f8ff;
        }
        .conversation-item.active {
            background-color: #d9edf7;
        }
        .chat-box {
            border: 1px solid #ddd;
            border-radius: 5px;
            height: 400px;
            overflow-y: scroll;
            background-color: #f9f9f9;
            padding: 10px;
        }
        .message {
            margin-bottom: 10px;
        }
        .message-left {
            text-align: left;
        }
        .message-right {
            text-align: right;
        }
        .message-content {
            display: inline-block;
            padding: 8px 12px;
            border-radius: 15px;
            max-width: 80%;
        }
        .message-left .message-content {
            background-color: #d2d6de;
            color: #444;
        }
        .message-right .message-content {
            background-color: #007bff;
            color: #fff;
        }
        .chat-footer {
            display: flex;
            margin-top: 10px;
        }
    </style>

    <style>
        .chat-box {
            border-radius: 10px;
        }

        #messageInput::placeholder {
            font-style: italic;
            color: #adb5bd;
        }

        .btn:hover {
            box-shadow: 0px 2px 8px rgba(0, 0, 0, 0.1);
        }

        #emojiPicker {
            position: absolute;
            background-color: white;
            border: 1px solid #ddd;
            padding: 5px;
            border-radius: 5px;
            z-index: 1000;
        }

        #emojiPicker.d-none {
            display: none;
        }
    </style>
</head>

<body>
    <!-- Page Preloder -->
    <div id="preloder">
        <div class="loader"></div>
    </div>

    <!-- Offcanvas Menu Section Begin -->
    <div class="offcanvas-menu-overlay"></div>
    <div class="offcanvas-menu-wrapper">
        <div class="canvas-close">
            <i class="fa fa-close"></i>
        </div>
        <div class="canvas-search search-switch">
            <i class="fa fa-search"></i>
        </div>
        <nav class="canvas-menu mobile-menu">
            <ul>
                <li><a href="/customer/home">Home</a></li>
                <li><a href="/customer/home/nutrition-plan">K·∫ø ho·∫°ch dinh d∆∞·ª°ng</a></li>
                <li><a href="/customer/home/workout-plan">K·∫ø ho·∫°ch luy·ªán t·∫≠p</a></li>
                <li><a href="/customer/home/Progress">Ti·∫øn ƒë·ªô luy·ªán t·∫≠p</a></li>
                <li><a href="/customer/home/shop">Shop</a></li>
                <li><a href="/customer/home/users/notification">Th√¥ng b√°o</a></li>
                <li><a href="/customer/home/chat">ChƒÉm s√≥c kh√°ch h√†ng</a></li>
            </ul>
        </nav>
        <div id="mobile-menu-wrap"></div>

    </div>
    <!-- Offcanvas Menu Section End -->

    <!-- Header Section Begin -->
    <header class="header-section">
        <div class="container-fluid">
            <div class="row">
                <div class="col-lg-3">
                    <div class="logo">
                        <a href="/customer/home">
                            <img th:src="@{/img/logo.png}" alt="">
                        </a>
                    </div>
                </div>
                <div class="col-lg-6">
                    <nav class="nav-menu">
                        <ul>
                            <li><a href="/customer/home">Home</a></li>
                            <li><a href="/customer/home/nutrition-plan">K·∫ø ho·∫°ch dinh d∆∞·ª°ng</a></li>
                            <li><a href="/customer/home/workout-plan">K·∫ø ho·∫°ch luy·ªán t·∫≠p</a></li>
                            <li><a href="/customer/home/Progress">Ti·∫øn ƒë·ªô luy·ªán t·∫≠p</a></li>
                            <li><a href="/customer/home/shop">Shop</a></li>
                            <li><a href="/customer/home/users/notification">Th√¥ng b√°o</a></li>
                            <li class="active"><a href="/customer/home/chat">ChƒÉm s√≥c kh√°ch h√†ng</a></li>
                        </ul>
                    </nav>
                </div>
                <div class="col-lg-3">
                    <!-- User Icon and Login/Signup Links -->
                    <div class="d-flex justify-content-end align-items-center">
                        <a href="/customer/home/users" class="user-icon" id="user-icon">
                            <i class="fa fa-user"></i>
                        </a>
                        <div class="auth-links ml-3" id="auth-links">
                            <a href="/req/login" class="login-btn" id="login-btn">Login</a> |
                            <a href="/req/signup" class="signup-btn">Signup</a>
                        </div>
                        <div class="user-info text-white" id="user-info" style="display: none;">
                            <span>Welcome, <span id="username"></span>!</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="canvas-open">
                <i class="fa fa-bars"></i>
            </div>
        </div>
    </header>
    <!-- Header End -->

    <!-- Breadcrumb Section Begin -->
    <section class="breadcrumb-section set-bg" th:data-setbg="@{/img/breadcrumb-bg.jpg}">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <div class="breadcrumb-text">
                        <h2>ChƒÉm s√≥c kh√°ch h√†ng</h2>
                        <div class="bt-option">
                            <a href="/customer/home">Home</a>
                            <span>ChƒÉm s√≥c kh√°ch h√†ng</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- Breadcrumb Section End -->

    <!-- Contact Section Begin -->
    <section class="contact-section spad">
        <div class="container">
            <div class="row">
                <div class="col-lg-6">
                    <div class="section-title contact-title">
                        <span>Li√™n h·ªá v·ªõi ch√∫ng t√¥i</span>

                    </div>
                    <div class="contact-widget">
                        <div class="cw-text">
                            <i class="fa fa-map-marker"></i>
                            <p>H·ªçc Vi·ªán Kƒ© Thu·∫≠t M·∫≠t M√£<br/> 141 Chi·∫øn Th·∫Øng, T√¢n Tri·ªÅu, Thanh Tr√¨, H√† N·ªôi</p>
                        </div>
                        <div class="cw-text">
                            <i class="fa fa-mobile"></i>
                            <ul>
                                <li>0364506439</li>
                                <li>0364506439</li>
                            </ul>
                        </div>
                        <div class="cw-text email">
                            <i class="fa fa-envelope"></i>
                            <p>Support.gymcenter@gmail.com</p>
                        </div>
                    </div>
                </div>
                <div class="col-lg-6">
                    <div class="leave-comment">
                        <div class="col-sm-12">
                            <div class="card shadow-sm">
                                <div class="card-header bg-primary text-white">
                                    <h5 class="mb-0"><i class="fas fa-comments"></i> Direct Chat</h5>
                                </div>
                                <div id="messages" class="chat-box p-3" style="height: 400px; overflow-y: auto; background-color: #f8f9fa; border-bottom: 1px solid #ddd;">
                                    <!-- Messages will load here -->
                                </div>
                                <div class="panel-footer" style="background-color: #f1f3f5; border-top: 1px solid #ddd; padding: 10px;">
                                    <div class="input-group align-items-center" style="display: flex; gap: 10px;">
                                        <!-- Input tin nh·∫Øn -->
                                        <input type="text" id="messageInput" class="form-control" placeholder="Type your message..." onkeypress="checkEnter(event)"
                                               style="border-radius: 20px; flex-grow: 1; padding: 10px;">

                                        <!-- N√∫t ch·ªçn file -->
                                        <label for="imageInput" class="btn btn-outline-secondary" style="border-radius: 50%; padding: 8px 12px; display: flex; align-items: center; justify-content: center;">
                                            <i class="fas fa-paperclip"></i>
                                        </label>
                                        <input type="file" id="imageInput" accept="image/*" style="display: none;">

                                        <!-- B·ªô ch·ªçn Emoji -->
                                        <div id="emojiPickerWrapper" style="position: relative;">
                                            <button class="btn btn-outline-secondary" style="border-radius: 50%; padding: 8px 12px;display: flex; align-items: center; justify-content: center;"
                                                    title="Open emoji picker" onclick="toggleEmojiPicker()">
                                                <i class="fas fa-smile"></i>
                                            </button>
                                            <div id="emojiPicker" class="d-none" style="position: absolute; bottom: 100%; right: 0; background: white; box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1); padding: 10px; border-radius: 10px;">
                                                <button type="button" class="btn btn-light btn-sm" onclick="selectEmoji('üòä')">üòä</button>
                                                <button type="button" class="btn btn-light btn-sm" onclick="selectEmoji('üòÇ')">üòÇ</button>
                                                <button type="button" class="btn btn-light btn-sm" onclick="selectEmoji('‚ù§Ô∏è')">‚ù§Ô∏è</button>
                                                <button type="button" class="btn btn-light btn-sm" onclick="selectEmoji('üëç')">üëç</button>
                                            </div>
                                        </div>

                                        <!-- N√∫t g·ª≠i -->
                                        <button class="btn btn-primary" onclick="sendMessage()"
                                                style="border-radius: 20px; padding: 10px 20px; display: flex; align-items: center; justify-content: center;">
                                            Send
                                        </button>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </section>
    <!-- Contact Section End -->

    <!-- Get In Touch Section Begin -->
    <div class="gettouch-section">
        <div class="container">
            <div class="row">
                <div class="col-md-4">
                    <div class="gt-text">
                        <i class="fa fa-map-marker"></i>
                        <p>H·ªçc Vi·ªán Kƒ© Thu·∫≠t M·∫≠t M√£<br/> 141 Chi·∫øn Th·∫Øng, T√¢n Tri·ªÅu, Thanh Tr√¨, H√† N·ªôi</p>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="gt-text">
                        <i class="fa fa-mobile"></i>
                        <ul>
                            <li>125-711-811</li>
                            <li>125-668-886</li>
                        </ul>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="gt-text email">
                        <i class="fa fa-envelope"></i>
                        <p>Support.gymcenter@gmail.com</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Get In Touch Section End -->

    <!-- Footer Section Begin -->
    <section class="footer-section">
        <div class="container">
            <div class="row">
                <div class="col-lg-4">
                    <div class="fs-about">
                        <div class="fa-logo">
                            <a href="#"><img th:src="@{/img/logo.png}" alt=""></a>
                        </div>
                        <p>‚ÄúCon ƒë∆∞·ªùng d·∫´n ƒë·∫øn th√†nh c√¥ng ƒë∆∞·ª£c l√†m n√™n t·ª´ nh·ªØng vi√™n g·∫°ch c·ªßa s·ª± ki√™n tr√¨. H√£y l√† ch√≠nh m√¨nh, v∆∞·ª£t qua m·ªçi ch∆∞·ªõng ng·∫°i v√† theo ƒëu·ªïi ∆∞·ªõc m∆° c·ªßa b·∫£n th√¢n.‚Äù</p>
                        <div class="fa-social">
                            <a href="#"><i class="fa fa-facebook"></i></a>
                            <a href="#"><i class="fa fa-twitter"></i></a>
                            <a href="#"><i class="fa fa-youtube-play"></i></a>
                            <a href="#"><i class="fa fa-instagram"></i></a>
                            <a href="#"><i class="fa  fa-envelope-o"></i></a>
                        </div>
                    </div>
                </div>
                <div class="col-lg-2 col-md-3 col-sm-6">
                    <div class="fs-widget">
                        <h4>Useful links</h4>
                        <ul>
                            <li><a href="#">About</a></li>
                            <li><a href="#">Blog</a></li>
                            <li><a href="#">Classes</a></li>
                            <li><a href="#">Contact</a></li>
                        </ul>
                    </div>
                </div>
                <div class="col-lg-2 col-md-3 col-sm-6">
                    <div class="fs-widget">
                        <h4>Support</h4>
                        <ul>
                            <li><a href="#">Login</a></li>
                            <li><a href="#">My account</a></li>
                            <li><a href="#">Subscribe</a></li>
                            <li><a href="#">Contact</a></li>
                        </ul>
                    </div>
                </div>
                <div class="col-lg-4 col-md-6">
                    <div class="fs-widget">
                        <h4>Tips & Guides</h4>
                        <div class="fw-recent">
                            <h6><a href="#">Physical fitness may help prevent depression, anxiety</a></h6>
                            <ul>
                                <li>3 min read</li>
                                <li>20 Comment</li>
                            </ul>
                        </div>
                        <div class="fw-recent">
                            <h6><a href="#">Fitness: The best exercise to lose belly fat and tone up...</a></h6>
                            <ul>
                                <li>3 min read</li>
                                <li>20 Comment</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-12 text-center">
                    <div class="copyright-text">

                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- Footer Section End -->

    <!-- Search model Begin -->
    <div class="search-model">
        <div class="h-100 d-flex align-items-center justify-content-center">
            <div class="search-close-switch">+</div>
            <form class="search-model-form">
                <input type="text" id="search-input" placeholder="Search here.....">
            </form>
        </div>
    </div>
    <!-- Search model end -->

<!-- Js Plugins -->
<script th:src="@{/js2/jquery-3.3.1.min.js}"></script>
<script th:src="@{/js2/bootstrap.min.js}"></script>
<script th:src="@{/js2/jquery.magnific-popup.min.js}"></script>
<script th:src="@{/js2/masonry.pkgd.min.js}"></script>
<script th:src="@{/js2/jquery.barfiller.js}"></script>
<script th:src="@{/js2/jquery.slicknav.js}"></script>
<script th:src="@{/js2/owl.carousel.min.js}"></script>
<script th:src="@{/js2/main.js}"></script>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            // H√†m l·∫•y v√† hi·ªÉn th·ªã t√™n ng∆∞·ªùi d√πng
            async function fetchAndDisplayUsernames() {
                try {
                    // G·ª≠i y√™u c·∫ßu GET t·ªõi API
                    const response = await fetch('http://localhost:8080/customer/home/users/user-info1', {
                        method: 'GET',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        credentials: 'include' // ƒê·∫£m b·∫£o g·ª≠i cookie session
                    });

                    if (response.ok) {
                        const data = await response.json(); // L·∫•y d·ªØ li·ªáu JSON t·ª´ ph·∫£n h·ªìi
                        const username = data.username;

                        // Hi·ªÉn th·ªã t√™n ng∆∞·ªùi d√πng v√† ·∫©n c√°c li√™n k·∫øt login/signup
                        document.getElementById("auth-links").style.display = 'none'; // ·∫®n "Login" v√† "Signup"
                        document.getElementById("user-info").style.display = 'block'; // Hi·ªÉn th·ªã t√™n ng∆∞·ªùi d√πng
                        document.getElementById("username").innerText = username; // C·∫≠p nh·∫≠t t√™n ng∆∞·ªùi d√πng
                    } else {
                        console.error("Error fetching username:", response.statusText);
                    }
                } catch (error) {
                    console.error("Error fetching username:", error);
                }
            }

            // Ki·ªÉm tra khi t·∫£i trang v√† g·ªçi API
            fetchAndDisplayUsernames();
        });

    </script>

    <script>
        let customerUsername = ""; // S·∫Ω ƒë∆∞·ª£c g√°n gi√° tr·ªã t·ª´ API
        const adminUsername = "admin"; // Username c·ªßa admin
        let conversationId = ""; // S·∫Ω ƒë∆∞·ª£c thi·∫øt l·∫≠p sau khi l·∫•y ƒë∆∞·ª£c username

        const socket = new SockJS('/ws');
        const stompClient = Stomp.over(socket);

        // K·∫øt n·ªëi WebSocket
        stompClient.connect({}, function (frame) {
            console.log('Connected as: ' + frame);

            if (conversationId) {
                stompClient.subscribe('/topic/messages/' + conversationId, function (message) {
                    showMessage(JSON.parse(message.body));
                });
            }
        });

        async function createConversation() {
            const conversation = {
                conversationId: conversationId,
                adminUsername: adminUsername,
                customerUsername: customerUsername
            };

            try {
                const response = await fetch('http://localhost:8080/customer/home/users/conversations/create', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(conversation)
                });

                if (!response.ok) {
                    console.error("Failed to create conversation:", response.statusText);
                } else {
                    console.log("Conversation created successfully");
                }
            } catch (error) {
                console.error("Error creating conversation:", error);
            }
        }


        async function fetchAndDisplayUsernames() {

            try {
                const response = await fetch('http://localhost:8080/customer/home/users/user-info1', {
                    method: 'GET',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    credentials: 'include'
                });

                if (response.ok) {
                    const data = await response.json();

                    if (data && data.username) {
                        customerUsername = data.username;
                        conversationId = adminUsername + "-" + customerUsername;

                        await createConversation();

                        if (!isSubscribed &&conversationId) {
                            stompClient.subscribe('/topic/messages/' + conversationId, function (message) {
                                showMessage(JSON.parse(message.body));
                            });
                            isSubscribed = true;
                        }
                    } else {
                        console.error("Username not found in the response");
                    }
                } else {
                    console.error("Error fetching username:", response.statusText);
                }
            } catch (error) {
                console.error("Error fetching username:", error);
            }
        }

        window.onload = fetchAndDisplayUsernames;

        function sendMessage() {
            const messageInputElem = document.getElementById('messageInput');
            const imageInputElem = document.getElementById('imageInput');

            if (!messageInputElem || !imageInputElem) {
                console.error("Required elements are missing in the DOM.");
                return;
            }

            const messageInput = messageInputElem.value;
            const imageInput = imageInputElem.files[0];

            if (conversationId && customerUsername && adminUsername) {
                let message = {
                    senderUsername: customerUsername,
                    receiverUsername: adminUsername,
                    conversationId: conversationId,
                    message: "",
                    type: "text"
                };

                if (imageInput) {
                    const reader = new FileReader();
                    reader.onload = function (e) {
                        const img = new Image();
                        img.src = e.target.result;
                        img.onload = function () {
                            // T·∫°o m·ªôt canvas ƒë·ªÉ thay ƒë·ªïi k√≠ch th∆∞·ªõc ·∫£nh
                            const canvas = document.createElement('canvas');
                            const ctx = canvas.getContext('2d');

                            const maxWidth = 800; // K√≠ch th∆∞·ªõc ·∫£nh t·ªëi ƒëa (v√≠ d·ª•: 800px chi·ªÅu r·ªông)
                            const maxHeight = 600; // K√≠ch th∆∞·ªõc t·ªëi ƒëa theo chi·ªÅu cao
                            const scaleFactor = Math.min(maxWidth / img.width, maxHeight / img.height);

                            canvas.width = img.width * scaleFactor;
                            canvas.height = img.height * scaleFactor;

                            // V·∫Ω ·∫£nh v√†o canvas v·ªõi k√≠ch th∆∞·ªõc m·ªõi
                            ctx.drawImage(img, 0, 0, canvas.width, canvas.height);

                            // Chuy·ªÉn ·∫£nh t·ª´ canvas th√†nh chu·ªói base64 v·ªõi ch·∫•t l∆∞·ª£ng gi·∫£m (v√≠ d·ª•: 0.7 ch·∫•t l∆∞·ª£ng)
                            const resizedImage = canvas.toDataURL('image/jpeg', 0.7);
                            message.message = resizedImage;
                            message.type = "image";
                            stompClient.send("/app/chat/" + conversationId, {}, JSON.stringify(message));
                        };
                    };
                    reader.readAsDataURL(imageInput);
                } else if (messageInput.trim()) {
                    message.message = messageInput;
                    message.type = "text";
                    stompClient.send("/app/chat/" + conversationId, {}, JSON.stringify(message));
                }

                // Reset inputs sau khi g·ª≠i
                messageInputElem.value = '';
                imageInputElem.value = '';
            } else {
                console.error("WebSocket connection is not established or missing data.");
            }
        }



        function showMessage(message) {
            const messagesBox = document.getElementById('messages');
            const messageElement = document.createElement('div');

            const alignClass = message.senderUsername === adminUsername ? 'message-left' : 'message-right';

            messageElement.className = `message ${alignClass}`;

            if (message.type === "text") {
                messageElement.innerHTML = `
            <div class="message-content">
                <strong>${message.senderUsername}</strong><br>
                ${message.message}<br>
                <small>${new Date().toLocaleTimeString()}</small>
            </div>
        `;
            } else if (message.type === "image") {
                messageElement.innerHTML = `
            <div class="message-content">
                <strong>${message.senderUsername}</strong><br>
                <img src="${message.message}" alt="Image" style="max-width: 200px;"><br>
                <small>${new Date().toLocaleTimeString()}</small>
            </div>
        `;
            } else if (message.type === "emoji") {
                messageElement.innerHTML = `
            <div class="message-content">
                <strong>${message.senderUsername}</strong><br>
                <span style="font-size: 24px;">${message.message}</span><br>
                <small>${new Date().toLocaleTimeString()}</small>
            </div>
        `;
            }

            messagesBox.appendChild(messageElement);
            messagesBox.scrollTop = messagesBox.scrollHeight;
        }

        function checkEnter(event) {
            if (event.key === "Enter") {
                sendMessage();
            }
        }

        function toggleEmojiPicker() {
            const emojiPicker = document.getElementById('emojiPicker');
            if (emojiPicker.classList.contains('d-none')) {
                emojiPicker.classList.remove('d-none'); // Hi·ªÉn th·ªã b·ªô ch·ªçn emoji
            } else {
                emojiPicker.classList.add('d-none'); // ·∫®n b·ªô ch·ªçn emoji
            }
        }

        function selectEmoji(emoji) {
            const messageInput = document.getElementById('messageInput');
            messageInput.value += emoji; // Th√™m emoji v√†o n·ªôi dung tin nh·∫Øn
        }

    </script>

</body>

</html>