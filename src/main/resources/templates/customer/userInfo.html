<!DOCTYPE html>
<html lang="zxx">

<head>
    <meta charset="UTF-8">
    <meta name="description" content="Gym Template">
    <meta name="keywords" content="Gym, unica, creative, html">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Gym | Template</title>

    <!-- Google Font -->
    <link href="https://fonts.googleapis.com/css?family=Muli:300,400,500,600,700,800,900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Oswald:300,400,500,600,700&display=swap" rel="stylesheet">

    <!-- Css Styles -->
    <link rel="stylesheet" th:href="@{/css2/bootstrap.min.css}">
    <link rel="stylesheet" th:href="@{/css2/font-awesome.min.css}">
    <link rel="stylesheet" th:href="@{/css2/flaticon.css}">
    <link rel="stylesheet" th:href="@{/css2/owl.carousel.min.css}" >
    <link rel="stylesheet" th:href="@{/css2/barfiller.css}"  >
    <link rel="stylesheet" th:href="@{/css2/magnific-popup.css}" >
    <link rel="stylesheet" th:href="@{/css2/slicknav.min.css}">
    <link rel="stylesheet" th:href="@{/css2/style.css}" >
    <style>
        .profile-container {
            background-color: #151515;
            border: 3px solid #f36100;
            border-radius: 10px;
            padding: 20px 30px;
            max-width: 400px;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.5);
            justify-content: center;
            align-items: center;
        }

        .profile-details {
            margin: 10px 0;
            line-height: 1.8;
            color: #fff;
        }
    </style>
    <style>
        /* Căn chỉnh phần User icon và Login/Signup trong header */

        /* Căn chỉnh biểu tượng người dùng */
        .user-icon {
            font-size: 2rem;
            color: white; /* Màu trắng cho icon */
            text-decoration: none;
            margin-right: 10px; /* Khoảng cách giữa icon và login/signup */
        }

        .user-icon:hover {
            color: #007bff; /* Màu khi hover */
        }

        /* Căn chỉnh các liên kết login/signup */
        .auth-links a {
            text-decoration: none;
            color: white; /* Màu trắng */
            font-weight: bold;
            margin-left: 0px;
        }

        .auth-links a:hover {
            color: #007bff; /* Màu khi hover */
        }

        /* Thêm hiệu ứng cho các liên kết */
        .login-btn, .signup-btn {
            text-transform: uppercase; /* Viết hoa cho các liên kết */
        }
    </style>
</head>

<body>
<!-- Page Preloder -->
<div id="preloder">
    <div class="loader"></div>
</div>

<!-- Offcanvas Menu Section Begin -->
<div class="offcanvas-menu-overlay"></div>
<div class="offcanvas-menu-wrapper">
    <div class="canvas-close">
        <i class="fa fa-close"></i>
    </div>
    <div class="canvas-search search-switch">
        <i class="fa fa-search"></i>
    </div>
    <nav class="canvas-menu mobile-menu">
        <ul>
            <li><a href="/customer/home">Home</a></li>
            <li><a href="/customer/home/nutrition-plan">Kế hoạch dinh dưỡng</a></li>
            <li><a href="/customer/home/workout-plan">Kế hoạch luyện tập</a></li>
            <li><a href="/customer/home/progress">Tiến độ luyện tập</a></li>
            <li><a href="/customer/home/shop">Shop</a></li>
            <li><a href="/customer/home/users/notification">Thông báo</a></li>
            <li><a href="/customer/home/chat">Chăm sóc khách hàng</a></li>
        </ul>
    </nav>
    <div id="mobile-menu-wrap"></div>
    <div class="canvas-social">
        <a href="#"><i class="fa fa-facebook"></i></a>
        <a href="#"><i class="fa fa-twitter"></i></a>
        <a href="#"><i class="fa fa-youtube-play"></i></a>
        <a href="#"><i class="fa fa-instagram"></i></a>
    </div>
</div>
<!-- Offcanvas Menu Section End -->

<!-- Header Section Begin -->
<header class="header-section">
    <div class="container-fluid">
        <div class="row">
            <div class="col-lg-3">
                <div class="logo">
                    <a href="/customer/home">
                        <img th:src="@{/img/logo.png}" alt="">
                    </a>
                </div>
            </div>
            <div class="col-lg-6">
                <nav class="nav-menu">
                    <ul>
                        <li class="active"><a href="/customer/home">Home</a></li>
                        <li><a href="/customer/home/nutrition-plan">Kế hoạch dinh dưỡng</a></li>
                        <li><a href="/customer/home/workout-plan">Kế hoạch luyện tập</a></li>
                        <li><a href="/customer/home/users">Tiến độ luyện tập</a></li>
                        <li><a href="/customer/home/shop">Shop</a></li>
                        <li><a href="/customer/home/users/notification">Thông báo</a></li>
                        <li><a href="/customer/home/chat">Chăm sóc khách hàng</a></li>
                    </ul>
                </nav>
            </div>
            <div class="col-lg-3">
                <!-- User Icon and Login/Signup Links -->
                <div class="d-flex justify-content-end align-items-center">
                    <a href="/customer/home/users" class="user-icon" id="user-icon">
                        <i class="fa fa-user"></i>
                    </a>
                    <div class="auth-links ml-3" id="auth-links">
                        <a href="/req/login" class="login-btn" id="login-btn">Login</a> |
                        <a href="/req/signup" class="signup-btn">Signup</a>
                    </div>
                    <div class="user-info text-white" id="user-info" style="display: none;">
                        <span>Welcome, <span id="username"></span>!</span>
                    </div>
                </div>
            </div>
        </div>
        <div class="canvas-open">
            <i class="fa fa-bars"></i>
        </div>
    </div>
</header>
<!-- Header End -->

<!-- Breadcrumb Section Begin -->
<section class="breadcrumb-section set-bg" th:data-setbg="@{/img/breadcrumb-bg.jpg}">
    <div class="container">
        <div class="row">
            <div class="col-lg-12 text-center">
                <div class="breadcrumb-text">
                    <h2>User</h2>
                    <div class="bt-option">
                        <a href="/customer/home">Home</a>
                        <span>User</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- Breadcrumb Section End -->


<!-- Team Section Begin -->
<section class="team-section spad">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <div class="team-title">
                    <div class="section-title">
                        <span>View your</span>
                        <h2>Profile</h2>
                    </div>
                    <a href="/customer/home/users/update" class="primary-btn btn-normal appoinment-btn">EDIT PROFILE</a>
                    <a href="/req/login" class="primary-btn btn-normal appoinment-btn">Log Out</a>
                </div>
            </div>
        </div>
        <div style="display: flex; margin-left: auto; justify-content: center;">
            <div class="col-lg-4">
                <div class="ts-item set-bg" th:data-setbg="@{/img/team/team-4.jpg}">
                    <div class="ts_text">
                        <h4 id="name1">Athart Rachel</h4>
                        <span>Customer</span>
                    </div>
                </div>
            </div>
            <div class="profile-container">
                <div class="profile-details"><strong>Username:</strong> <span id="username1"></span></div>
                <div class="profile-details"><strong>Name:</strong> <span id="name" class="placeholder">Ana
                            Cristan</span></div>
                <div class="profile-details"><strong>Email:</strong> <span id="email"
                                                                           class="placeholder">ana.cris@orc.com</span></div>
                <div class="profile-details"><strong>Gender:</strong> <span id="gender"
                                                                            class="placeholder">Female</span>
                </div>
                <div class="profile-details"><strong>Age:</strong> <span id="age" class="placeholder">25</span>
                </div>
                <div class="profile-details"><strong>Weight:</strong> <span id="weight" class="placeholder">50
                            kg</span></div>
                <div class="profile-details"><strong>Height:</strong> <span id="height" class="placeholder">163
                            cm</span></div>
            </div>
        </div>
    </div>
</section>
<!-- Team Section End -->


<!-- Footer Section Begin -->
<section class="footer-section">
    <div class="container">
        <div class="row">
            <div class="col-lg-4">
                <div class="fs-about">
                    <div class="fa-logo">
                        <a href="#"><img th:src="@{/img/logo.png}" alt=""></a>
                    </div>
                    <p>“Con đường dẫn đến thành công được làm nên từ những viên gạch của sự kiên trì. Hãy là chính mình, vượt qua mọi chướng ngại và theo đuổi ước mơ của bản thân.”</p>
                    <div class="fa-social">
                        <a href="#"><i class="fa fa-facebook"></i></a>
                        <a href="#"><i class="fa fa-twitter"></i></a>
                        <a href="#"><i class="fa fa-youtube-play"></i></a>
                        <a href="#"><i class="fa fa-instagram"></i></a>
                        <a href="#"><i class="fa  fa-envelope-o"></i></a>
                    </div>
                </div>
            </div>
            <div class="col-lg-2 col-md-3 col-sm-6">
                <div class="fs-widget">
                    <h4>Useful links</h4>
                    <ul>
                        <li><a href="#">About</a></li>
                        <li><a href="#">Blog</a></li>
                        <li><a href="#">Classes</a></li>
                        <li><a href="#">Contact</a></li>
                    </ul>
                </div>
            </div>
            <div class="col-lg-2 col-md-3 col-sm-6">
                <div class="fs-widget">
                    <h4>Support</h4>
                    <ul>
                        <li><a href="#">Login</a></li>
                        <li><a href="#">My account</a></li>
                        <li><a href="#">Subscribe</a></li>
                        <li><a href="#">Contact</a></li>
                    </ul>
                </div>
            </div>
            <div class="col-lg-4 col-md-6">
                <div class="fs-widget">
                    <h4>Tips & Guides</h4>
                    <div class="fw-recent">
                        <h6><a href="#">Physical fitness may help prevent depression, anxiety</a></h6>
                        <ul>
                            <li>3 min read</li>
                            <li>20 Comment</li>
                        </ul>
                    </div>
                    <div class="fw-recent">
                        <h6><a href="#">Fitness: The best exercise to lose belly fat and tone up...</a></h6>
                        <ul>
                            <li>3 min read</li>
                            <li>20 Comment</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-12 text-center">
                <div class="copyright-text">

                </div>
            </div>
        </div>
    </div>
</section>
<!-- Footer Section End -->

<!-- Search model Begin -->
<div class="search-model">
    <div class="h-100 d-flex align-items-center justify-content-center">
        <div class="search-close-switch">+</div>
        <form class="search-model-form">
            <input type="text" id="search-input" placeholder="Search here.....">
        </form>
    </div>
</div>
<!-- Search model end -->
<script>
    async function fetchProfile() {
        try {
            const response = await fetch('/customer/home/users/user-info');
            if (response.ok) {
                const profileData = await response.json();
                document.getElementById('username1').textContent = profileData.username;
                document.getElementById('name1').textContent = profileData.fullName;
                document.getElementById('name').textContent = profileData.fullName;
                document.getElementById('email').textContent = profileData.email;
                document.getElementById('gender').textContent = profileData.gender;
                document.getElementById('age').textContent = profileData.age;
                document.getElementById('weight').textContent = `${profileData.weight} kg`;
                document.getElementById('height').textContent = `${profileData.height} cm`;
            } else {
                alert('Failed to fetch profile data.');
            }
        } catch (error) {
            console.error('Error fetching profile:', error);
            alert('An error occurred while loading the profile.');
        }
    }

    // Fetch profile data on page load
    fetchProfile();
</script>
<!-- Js Plugins -->
<script th:src="@{/js2/jquery-3.3.1.min.js}"></script>
<script th:src="@{/js2/bootstrap.min.js}"></script>
<script th:src="@{/js2/jquery.magnific-popup.min.js}"></script>
<script th:src="@{/js2/masonry.pkgd.min.js}"></script>
<script th:src="@{/js2/jquery.barfiller.js}"></script>
<script th:src="@{/js2/jquery.slicknav.js}"></script>
<script th:src="@{/js2/owl.carousel.min.js}"></script>
<script th:src="@{/js2/main.js}"></script>

<script>
    document.addEventListener("DOMContentLoaded", () => {
        // Hàm lấy và hiển thị tên người dùng
        async function fetchAndDisplayUsernames() {
            try {
                // Gửi yêu cầu GET tới API
                const response = await fetch('http://localhost:8080/customer/home/users/user-info1', {
                    method: 'GET',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    credentials: 'include' // Đảm bảo gửi cookie session
                });

                if (response.ok) {
                    const data = await response.json(); // Lấy dữ liệu JSON từ phản hồi
                    const username = data.username;

                    // Hiển thị tên người dùng và ẩn các liên kết login/signup
                    document.getElementById("auth-links").style.display = 'none'; // Ẩn "Login" và "Signup"
                    document.getElementById("user-info").style.display = 'block'; // Hiển thị tên người dùng
                    document.getElementById("username").innerText = username; // Cập nhật tên người dùng
                } else {
                    console.error("Error fetching username:", response.statusText);
                }
            } catch (error) {
                console.error("Error fetching username:", error);
            }
        }

        // Kiểm tra khi tải trang và gọi API
        fetchAndDisplayUsernames();
    });

</script>

</body>

</html>